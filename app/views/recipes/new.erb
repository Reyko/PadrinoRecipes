<h3>Add A Recipe</h3>

<% form_for @recipe, url_for(:recipes, :create) do |f| %>

  <% field_set_tag do %>
    <%= f.label :title %>
    <%= f.text_field :title %>
  <% end %>

  <% field_set_tag do %>
    <%= f.label :description %>
    <%= f.text_field :description %>
  <% end %>

  <% field_set_tag do %>
    <%= f.label :image_url %>
    <%= f.text_field :image_url %>
  <% end %>

  <% field_set_tag do %>
    <%= f.label :instructions %>
    <%= f.text_field :instructions %>
  <% end %>

  <% field_set_tag do %>
    <%= f.label :preparation_time %>
    <%= f.text_field :preparation_time %>
  <% end %>

  <% field_set_tag do %>
    <%= f.label :cooking_time %>
    <%= f.text_field :cooking_time %>
  <% end %>

  <% field_set_tag do %>
    <%= f.label :serves %>
    <%= f.text_field :serves %>
  <% end %>

  <!-- Fields for each ingredient -->
  <% f.fields_for :ingredient_recipes do |ingredient_fields| %>
    <% ingredient_fields.fields_for :ingredient do |nested_ingredient_fields| %>
      <h3> Ingredient </h3>
      <% field_set_tag do %>
        <%= ingredient_fields.label :qty %>
        <%= ingredient_fields.text_field :qty %>
      <% end %>
    <% end %>
  <% end %>
  
  <%= f.submit "Create Recipe" %>
  <button type = "button" onclick = "newIngredient()" >Add More</button>
<% end %>

<script type = "text/javascript">
  function newIngredient(){
    var idTemp = document.getElementById("recipe_ingredient_recipes_attributes_1_qty").getAttribute('id');
    var num = 0;

    for(var i=0; i < idTemp.length; i++) {

        if(idTemp[i] == "1") {

            num += 1;

        }

    }

    alert(num.toString());
    var id = document.getElementById("recipe_ingredient_recipes_attributes_1_qty");

    var fieldset = document.createElement("fieldset");
    fieldset.appendChild(id);

    // var label = document.createElement("label");
    // label.htmlFor = id;
    // var input = document.createElement("input");
    // input.n


    // alert(id);

    document.body.appendChild(fieldset); 

  }
</script>

